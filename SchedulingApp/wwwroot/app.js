!function(){"use strict";angular.module("schedulingApp",["ngRoute","ngMaterial","ngMdIcons","ngMessages"]).config(["$mdIconProvider","$mdThemingProvider","$routeProvider","$locationProvider",function(a,b,c,d){a.iconSet("menu","/icons/svg/menu.svg",24),b.theme("default").primaryPalette("blue").accentPalette("red"),c.when("/",{templateUrl:"views/pages/events.html",controller:"mainController"}).when("/members",{templateUrl:"views/pages/members.html"}),d.html5Mode(!0)}])}(),function(){"use strict";function a(a,b,c,d,e){console.log("77");var f=this;d.getCategories().then(function(a){console.log(a),f.categories=a}),f.event={name:"",description:"",categories:[],locations:[]},f.eventLocation={},f.searchText="",f.selectedLocation={name:""},f.cancel=function(){b.cancel()},f.transformChip=function(a){return a},f.saveEvent=function(){var a=$("#mapsearch").val();f.selectedLocation.name=a,f.event.locations=[],f.event.locations.push(f.selectedLocation),console.log(f.event),e.addEvent(f.event).then(function(a){b.hide(a)},function(){f.openToast("Error")})},f.openToast=function(a){c.show(c.simple().textContent(a).position("top right").hideDelay(2e3))}}angular.module("schedulingApp").controller("addEventDialogController",a),a.$inject=["$http","$mdDialog","$mdToast","categoriesService","eventsService"],console.log("177")}(),function(){"use strict";function a(a,b,c,d){console.log("66");var e=this;e.member={},e.genders=[{value:"male",text:"Male"},{value:"female",text:"Female"}],e.cancel=function(){b.cancel()},e.submit=function(){d.addMember(e.member).then(function(a){b.hide(a)},function(){e.openToast("Error while adding new member")})},e.openToast=function(a){c.show(c.simple().textContent(a).position("top right").hideDelay(2e3))}}angular.module("schedulingApp").controller("addMemberDialogController",a),a.$inject=["$http","$mdDialog","$mdToast","membersService"]}(),function(){"use strict";function a(a,b){}angular.module("schedulingApp").controller("eventController",a),a.$inject=["$scope","eventsService"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i){var j=this;c.getEvents().then(function(b){a.$apply(function(){j.events=b,j.selectedEvent=j.events[j.events.length-1]})}),h.getAllMembers().then(function(a){j.allMembers=a}),j.searchMemberText="",j.pageHeader="Pasākumu apraksts",j.allMembers=[],j.selectedMember="",j.searchText="",j.selectedEvent=null,j.tabId=0,j.addNewEvent=function(){},j.selectEvent=function(a){j.selectedEvent=a;var c=b("left");c.isOpen()&&c.close(),j.tabId=0},j.addEvent=function(a){var b=g("sm")||g("xs");console.log("44"),f.show({templateUrl:"../views/partials/addEvent.html",parent:angular.element(document.body),targetEvent:a,clickOutsideToClose:!0,fullscreen:b}).then(function(a){j.events.push(a),j.selectEvent(a),j.openToast("Pasākums pievienots")})},j.formScope={},j.setFormScope=function(a){j.formScope=a},j.addMemberToEvent=function(){j.selectedMember?h.addMemberToEvent(j.selectedMember.id,j.selectedEvent.id).then(function(a){j.selectedEvent.members.push(j.selectedMember),j.formScope.memberForm.$setUntouched(),j.formScope.memberForm.$setPristine(),j.selectedMember=null,j.searchMemberText="",j.openToast("Dalībnieks tika pievienots.")},function(a){j.openToast("Kļūda: ",a.data)}):j.openToast("Dalībnieks netika atrasts.")},j.removeMember=function(a){var b=j.selectedEvent.members.indexOf(a);h.deleteMemberFromEvent(a.id,j.selectedEvent.id).then(function(a){j.selectedEvent.members.splice(b,1),j.openToast("Dalībnieks tika noņemts")},function(a){j.openToast("Failed to delete member")})},j.removeAllMembers=function(a){var b=f.confirm().title("Jūs tiešam gribāt nodzēst visus dalībniekus?").textContent("Visi dalībnieki būs noņemti.").targetEvent(a).ok("Nodzēst").cancel("Nē");f.show(b).then(function(){h.deleteAllMembersFromEvent(j.selectedEvent.id).then(function(a){j.selectedEvent.members=[],j.openToast("Visi dalībnieki tika nodzēsti")},function(a){j.openToast("Failed to delete all members")})})},j.newLocation={},j.formScope2={},j.setFormScope2=function(a){j.formScope2=a},j.addLocationToEvent=function(){var a=$("#locationName").val();j.newLocation.name=a;var b={location:j.newLocation};j.newLocation.name?d.addLocationToEvent(j.selectedEvent.id,b).then(function(){d.getEventLocations(j.selectedEvent.id).then(function(a){j.selectedEvent.locations=a.locations}),j.formScope2.formLocation.$setUntouched(),j.formScope2.formLocation.$setPristine(),j.newLocation=null,j.openToast("Lokācija bija pievienota.")},function(a){j.openToast(a.data)}):j.openToast("Lokācija nebija atrasta.")},j.removeLocation=function(a){var b=j.selectedEvent.locations.indexOf(a);d.removeLocationFromEvent(a.id,j.selectedEvent.id).then(function(){j.selectedEvent.locations.splice(b,1),j.openToast("Lokācija tika noņemta")},function(a){j.openToast("Neizdevās nodzēst dalībnieku")})},j.filterMembers=function(a){for(var b=angular.copy(j.allMembers),c=b.length-1;c>=0;c--)for(var d=b[c],e=0,f=j.selectedEvent.members.length;e<f;e++){var g=j.selectedEvent.members[e];d&&d.id===g.id&&b.splice(c,1)}return b=i(b,a)},j.toggleSideNav=function(){b("left").toggle()},j.openToast=function(a){e.show(e.simple().textContent(a).position("top right").hideDelay(3e3))}}angular.module("schedulingApp").controller("mainController",a),a.$inject=["$scope","$mdSidenav","eventsService","locationService","$mdToast","$mdDialog","$mdMedia","membersService","filterFilter"]}(),function(){"use strict";function a(a,b,c,d,e){var f=this;f.pageHeader="Dalībnieki",f.customFullscreen=c("xs")||c("sm"),f.getAllMembers=function(){e.getAllMembers().then(function(b){a.$apply(function(){f.members=b})})},f.getAllMembers(),f.openToast=function(a){d.show(d.simple().textContent(a).position("top right").hideDelay(3e3))},f.addMember=function(a){var d=c("sm")||c("xs");b.show({templateUrl:"../views/partials/addMember.html",parent:angular.element(document.body),targetEvent:a,clickOutsideToClose:!1,fullscreen:d}).then(function(a){f.getAllMembers(),f.openToast("New member successfully added")})},f.deleteMember=function(a,c){var d=b.confirm().title("Do you want to delete member?").textContent("Please confirm to delete "+c.name).ariaLabel("Delete member").targetEvent(a).ok("Delete").cancel("Cancel");b.show(d).then(function(){e.deleteMember(c.id).then(function(a){f.getAllMembers(),f.openToast("Member removed")})})}}angular.module("schedulingApp").controller("membersController",a),a.$inject=["$scope","$mdDialog","$mdMedia","$mdToast","membersService"]}(),function(){"use strict";function a(a,b){}angular.module("schedulingApp").controller("sideNavController",a),a.$inject=["$scope","eventsService"]}(),function(){"use strict";function a(){return{scope:{displayWhen:"=displayWhen"},restrict:"E",templateUrl:"views/partials/waitLoader.html"}}function b(){return{restrict:"A",link:function(a,b,c){new google.maps.places.SearchBox(b[0])}}}function c(){return{restrict:"A",transclude:!0,scope:{location:"=googleMaps"},link:function(a,b,c){var d={lat:a.location.latitude,lng:a.location.longitude},e=new google.maps.Map(b[0],{zoom:15,center:d});new google.maps.Marker({position:d,map:e})}}}angular.module("schedulingApp").directive("waitLoader",a).directive("googleAddresses",b).directive("googleMaps",c)}(),function(){"use strict";function a(a){this.getCategories=function(){console.log("321");var b=new Promise(function(b,c){a.get("api/categories").then(function(a){200===a.status?(console.log("200"+a),b(a.data.categories)):(console.log("reject"+a),c(a.statusText))})["catch"](function(a){console.log("error"+a),c(a)})});return b}}angular.module("schedulingApp").service("categoriesService",a),a.$inject=["$http"]}(),function(){"use strict";function a(a){function b(a){a.categories=a.categories.map(function(a){return{categoryId:a.id}})}this.getEvents=function(){var b=new Promise(function(b,c){a.get("api/events").then(function(a){200===a.status?b(a.data.events):c(a.statusText)})["catch"](function(a){c(a)})});return b},this.addEvent=function(c){var d=Object.assign({},c);b(c);var e=new Promise(function(b,e){a.post("api/events",c).then(function(a){200===a.status?(console.log(d),b(d)):e(a.statusText)})["catch"](function(a){e(a)})});return e},this.deleteEvent=function(b){var c=new Promise(function(c,d){a["delete"]("api/events/"+b).then(function(a){204===a.status?c():d(a.statusText)})["catch"](function(a){d(a)})});return c}}angular.module("schedulingApp").service("eventsService",a),a.$inject=["$http"]}(),function(){"use strict";function a(a){this.addLocationToEvent=function(b,c){var d=new Promise(function(d,e){a.post("/api/events/"+b+"/locations",c).then(function(a){console.log(a),200===a.status?d(a.data.events):e(a.statusText)})["catch"](function(a){e(a)})});return d},this.getEventLocations=function(b){var c=new Promise(function(c,d){a.get("/api/events/"+b+"/locations").then(function(a){200===a.status?c(a.data):d(a.statusText)})["catch"](function(a){d(a)})});return c},this.removeLocationFromEvent=function(b,c){var d=new Promise(function(d,e){a["delete"]("/api/events/"+c+"/locations/"+b).then(function(a){204===a.status?d():e(a.statusText)})["catch"](function(a){e(a)})});return d}}angular.module("schedulingApp").service("locationService",a),a.$inject=["$http"]}(),function(){"use strict";function a(a){this.getAllMembers=function(){var b=new Promise(function(b,c){a.get("api/members").then(function(a){200===a.status?b(a.data.members):c(a.statusText)})["catch"](function(a){c(a)})});return b},this.getAllMembersForEvent=function(b){var c=new Promise(function(c,d){a.get("api/events/"+b).then(function(a){200===a.status?c(a.data.members):d(a.statusText)})["catch"](function(a){d(a)})});return c},this.addMember=function(b){var c=new Promise(function(c,d){a.post("api/members",b).then(function(a){200===a.status?c():d(a.statusText)})["catch"](function(a){d(a)})});return c},this.addMemberToEvent=function(b,c){var d=new Promise(function(d,e){a.put("api/events/"+c+"/members",{memberId:b}).then(function(a){200===a.status?d():e(a.statusText)})["catch"](function(a){e(a)})});return d},this.deleteMember=function(b){var c=new Promise(function(c,d){a["delete"]("api/members/"+b).then(function(a){204===a.status?c():d(a.statusText)})["catch"](function(a){d(a)})});return c},this.deleteMemberFromEvent=function(b,c){var d=new Promise(function(d,e){a["delete"]("api/events/"+c+"/members/"+b).then(function(a){204===a.status?d():e(a.statusText)})["catch"](function(a){e(a)})});return d},this.deleteAllMembersFromEvent=function(b){var c=new Promise(function(c,d){a["delete"]("api/events/"+b+"/members").then(function(a){204===a.status?c():d(a.statusText)})["catch"](function(a){d(a)})});return c}}angular.module("schedulingApp").service("membersService",a),a.$inject=["$http"]}();