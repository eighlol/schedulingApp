function addEventDialogController(a,b,c,d){var e=this,f=c.getCategories();f.then(function(a){e.categories=a.data}),e.$mdToast=d,e.event={name:"",description:"",categories:[],locations:[]},e.eventLocation={},e.$mdDialog=b,e.searchText="",e.selectedLocation={name:""},e.cancel=function(){e.$mdDialog.cancel()},e.transformChip=function(a){return a},e.saveEvent=function(){var b=$("#mapsearch").val();e.selectedLocation.name=b,e.event.locations=[],e.event.locations.push(e.selectedLocation),console.log(e.event),a.post("api/events",e.event).then(function(a){e.$mdDialog.hide(a)},function(){e.openToast("Error")})["finally"](function(){})},e.openToast=function(a){e.$mdToast.show(e.$mdToast.simple().textContent(a).position("top right").hideDelay(2e3))}}!function(){"use strict";angular.module("conferenceApp",["ngRoute","ngMaterial","ngMdIcons","ngMessages"]),angular.module("conferenceApp").config(["$mdIconProvider","$mdThemingProvider",function(a,b){a.iconSet("menu","/icons/svg/menu.svg",24),b.theme("default").primaryPalette("blue").accentPalette("red")}])}(),angular.module("conferenceApp").controller("addEventDialogController",addEventDialogController),addEventDialogController.$inject=["$http","$mdDialog","categoriesService","$mdToast"],function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j){var k=this,l=c.getEvents();l.then(function(a){k.events=a.data,k.selectedEvent=k.events[k.events.length-1]});var m=g.getAllMembers();m.then(function(a){k.allMembers=a.data}),k.$mdSidenav=a,k.$mdToast=d,k.$mdDialog=e,k.$mdMedia=f,k.searchMemberText="",k.allMembers=[],k.selectedMember="",k.searchText="",k.selectedEvent=null,k.tabId=0,k.errorMessage="",k.isBusy=!0,k.addNewEvent=function(){},k.selectEvent=function(a){k.selectedEvent=a;var b=k.$mdSidenav("left");b.isOpen()&&b.close(),k.tabId=0},k.addEvent=function(a){var b=k.$mdMedia("sm")||k.$mdMedia("xs");k.$mdDialog.show({templateUrl:"/views/partials/addEvent.html",parent:angular.element(document.body),targetEvent:a,controller:addEventDialogController,controllerAs:"addCtrl",clickOutsideToClose:!0,fullscreen:b}).then(function(a){k.events.push(a.data),k.selectEvent(a.data),k.openToast("Pasākums pievienots")},function(){})["finally"](function(){})},k.formScope={},k.setFormScope=function(a){k.formScope=a},k.addMemberToEvent=function(){if(k.selectedMember){var a=k.selectedEvent.id;b.post("/api/events/"+a+"/members",k.selectedMember).then(function(a){k.selectedEvent.members.push(a.data),console.log(k.formScope),k.formScope.memberForm.$setUntouched(),k.formScope.memberForm.$setPristine(),k.selectedMember=null,k.searchMemberText="",k.openToast("Dalībnieks tika pievienots."),console.log(2)},function(a){k.openToast("Kļūda: ",a.data)})}else k.openToast("Dalībnieks netika atrasts.")},k.removeMember=function(a){k.isBusy=!0;var c=k.selectedEvent.members.indexOf(a),d=k.selectedEvent.id;b["delete"]("/api/events/"+d+"/members/"+a.id).then(function(a){k.selectedEvent.members.splice(c,1),k.openToast("Dalībnieks tika noņemts")},function(a){k.openToast("Failed to delete member")})["finally"](function(){k.isBusy=!1})},k.removeAllMembers=function(a){k.isBusy=!0;var c=k.selectedEvent.id,d=k.$mdDialog.confirm().title("Jūs tiešam gribāt nodzēst visus dalībniekus?").textContent("Visi dalībnieki būs noņemti.").targetEvent(a).ok("Nodzēst").cancel("Nē");k.$mdDialog.show(d).then(function(){b["delete"]("/api/events/"+c+"/members").then(function(a){k.selectedEvent.members=[],k.openToast("Visi dalībnieki tika nodzēsti")},function(a){k.openToast("Failed to delete all members")})["finally"](function(){k.isBusy=!1})})},k.newLocation={},k.formScope2={},k.setFormScope2=function(a){k.formScope2=a},k.addLocationToEvent=function(){if(k.newLocation){var a=$("#locationName").val();k.newLocation.name=a;var c=k.selectedEvent.id;console.log(k.newLocation),b.post("/api/events/"+c+"/locations",k.newLocation).then(function(a){k.selectedEvent.locations.push(a.data),k.formScope2.formLocation.$setUntouched(),k.formScope2.formLocation.$setPristine(),k.newLocation=null,k.openToast("Lokācija bija pievienota.")},function(a){console.log(a.data),k.openToast(a.data)})}else k.openToast("Lokācija nebija atrasta.")},k.addNewMember=function(a){var c={name:a};b.post("/api/members",c).then(function(a){k.allMembers.push(a.data),k.openToast("Ir izveidots jauns dalībnieks.")},function(a){k.openToast(a.data)})},k.filterMembers=function(a){for(var b=angular.copy(k.allMembers),c=b.length-1;c>=0;c--)for(var d=b[c],e=0,f=k.selectedEvent.members.length;f>e;e++){var g=k.selectedEvent.members[e];d&&d.id===g.id&&b.splice(c,1)}return b=h(b,a)},k.toggleSideNav=function(){k.$mdSidenav("left").toggle()},k.openToast=function(a){k.$mdToast.show(k.$mdToast.simple().textContent(a).position("top right").hideDelay(3e3))}}angular.module("conferenceApp").controller("mainController",a),a.$inject=["$mdSidenav","$http","eventsService","$mdToast","$mdDialog","$mdMedia","membersService","filterFilter"]}(),function(){"use strict";function a(){return{scope:{displayWhen:"=displayWhen"},restrict:"E",templateUrl:"views/partials/waitLoader.html"}}function b(){return{restrict:"A",link:function(a,b,c){new google.maps.places.SearchBox(b[0])}}}function c(){return{restrict:"A",transclude:!0,scope:{location:"=googleMaps"},link:function(a,b,c){var d={lat:a.location.latitude,lng:a.location.longitude},e=new google.maps.Map(b[0],{zoom:15,center:d});new google.maps.Marker({position:d,map:e})}}}angular.module("conferenceApp").directive("waitLoader",a).directive("googleAddresses",b).directive("googleMaps",c)}(),function(){"use strict";function a(a,b){var c=b.defer();a.get("api/categories").then(function(a){c.resolve(a)}),this.getCategories=function(){return c.promise}}angular.module("conferenceApp").service("categoriesService",a),a.$inject=["$http","$q"]}(),function(){"use strict";function a(a,b){var c=b.defer();a.get("api/events").then(function(a){c.resolve(a)}),this.getEvents=function(){return c.promise}}angular.module("conferenceApp").service("eventsService",a),a.$inject=["$http","$q"]}(),function(){"use strict";function a(a,b){var c=b.defer();a.get("api/members").then(function(a){c.resolve(a)}),this.getAllMembers=function(){return c.promise}}angular.module("conferenceApp").service("membersService",a),a.$inject=["$http","$q"]}();